{"ast":null,"code":"var _jsxFileName = \"D:\\\\download\\\\240825gestao\\\\gestao\\\\frontend\\\\src\\\\pages\\\\DashboardHomeSimple.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useMemo, useState } from 'react';\nimport { Box, Grid, Card, CardContent, Typography, Avatar, Button, Chip, Alert, Stack, Dialog, DialogTitle, DialogContent, DialogActions, List, ListItem, ListItemText, Checkbox, CircularProgress, LinearProgress } from '@mui/material';\nimport { useTheme } from '@mui/material/styles';\nimport { useNavigate } from 'react-router-dom';\nimport TestesModal from '../components/TestesModal';\nimport { Construction, People, AttachMoney, ExitToApp } from '@mui/icons-material';\nimport { Storefront } from '@mui/icons-material';\nimport { useAuth } from '../contexts/AuthContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function DashboardHome() {\n  _s();\n  const theme = useTheme();\n  const navigate = useNavigate();\n  const {\n    user,\n    token,\n    hasPermission,\n    isAdmin,\n    logout\n  } = useAuth();\n  const API = process.env.REACT_APP_API_URL || 'http://localhost:8000';\n  const [testesCount, setTestesCount] = useState(null);\n  const [testesUrgent, setTestesUrgent] = useState(false);\n  const [testesList, setTestesList] = useState([]);\n  const [testesArList, setTestesArList] = useState([]);\n  const [clientes, setClientes] = useState([]);\n  const [testesOffCount, setTestesOffCount] = useState(0);\n  const [testesOkCount, setTestesOkCount] = useState(0);\n  const [openTestesModal, setOpenTestesModal] = useState(false);\n  const [hasPendentes, setHasPendentes] = useState(false);\n  const [openPendentes, setOpenPendentes] = useState(false);\n  // Backup\n  const [backupStatus, setBackupStatus] = useState(null);\n  const [loadingBackup, setLoadingBackup] = useState(false);\n  const [backupsModalOpen, setBackupsModalOpen] = useState(false);\n  const [backups, setBackups] = useState([]);\n  const [selectedFiles, setSelectedFiles] = useState(new Set());\n  const [runningBackup, setRunningBackup] = useState(false);\n  const [progress, setProgress] = useState({\n    running: false,\n    percent: 0,\n    processed: 0,\n    total: 0,\n    current: null\n  });\n  const [canceling, setCanceling] = useState(false);\n  const [backupError, setBackupError] = useState(\"\");\n  const isAuthenticated = useMemo(() => !!token, [token]);\n  useEffect(() => {\n    let mounted = true;\n    (async () => {\n      try {\n        const [resGer, resAr] = await Promise.all([fetch(`${API}/testes-loja/`), fetch(`${API}/testes-ar-condicionado/`)]);\n        const [dataGer, dataAr] = await Promise.all([resGer.ok ? resGer.json() : Promise.resolve([]), resAr.ok ? resAr.json() : Promise.resolve([])]);\n        if (!mounted) return;\n        const listGer = Array.isArray(dataGer) ? dataGer : [];\n        const listAr = Array.isArray(dataAr) ? dataAr : [];\n        const total = listGer.length + listAr.length;\n        const off = listGer.filter(t => (t.status || '').toString().toUpperCase() === 'OFF').length + listAr.filter(t => (t.status || '').toString().toUpperCase() === 'OFF').length;\n        const ok = Math.max(0, total - off);\n        setTestesCount(total);\n        setTestesOffCount(off);\n        setTestesOkCount(ok);\n        setTestesUrgent(off > 0);\n\n        // Cálculo de pendências: atraso > 7 dias ou quinta-feira sem registro do dia\n        const daysSince = dateStr => {\n          if (!dateStr) return null;\n          const d = new Date(dateStr);\n          if (isNaN(d.getTime())) return null;\n          return Math.floor((Date.now() - d.getTime()) / (1000 * 60 * 60 * 24));\n        };\n        const sameDay = (a, b) => a.getFullYear() === b.getFullYear() && a.getMonth() === b.getMonth() && a.getDate() === b.getDate();\n        const getLatestBy = (list, predicate) => {\n          if (!Array.isArray(list)) return null;\n          const candidates = list.filter(predicate);\n          if (!candidates.length) return null;\n          candidates.sort((a, b) => new Date(b.data_teste || b.data || b.created_at || 0) - new Date(a.data_teste || a.data || a.created_at || 0));\n          return candidates[0];\n        };\n        const today = new Date();\n        const isThursday = today.getDay() === 4; // 0-dom, 4-qui\n        let pendentes = 0;\n        for (let i = 1; i <= 16; i++) {\n          const ger = getLatestBy(listGer, t => Number(t.cliente_id) === i);\n          const ar = getLatestBy(listAr, t => Number(t.cliente_id) === i);\n          const gerDate = ger ? new Date(ger.data_teste || ger.data || ger.created_at) : null;\n          const arDate = ar ? new Date(ar.data_teste || ar.data || ar.created_at) : null;\n          const gerDays = gerDate ? daysSince(gerDate) : null;\n          const arDays = arDate ? daysSince(arDate) : null;\n          const gerOk = gerDays !== null && gerDays <= 7;\n          const arOk = arDays !== null && arDays <= 7;\n          const hasToday = [gerDate, arDate].some(d => d && sameDay(d, today));\n          // Pendente se qualquer um dos dois não estiver ok (ausente ou >7d), ou quinta-feira sem registro hoje\n          const overdue = !(gerOk && arOk);\n          const pendenteHoje = isThursday && !hasToday;\n          if (overdue || pendenteHoje) pendentes++;\n        }\n        setHasPendentes(pendentes > 0);\n      } catch (e) {\n        if (!mounted) return;\n        setTestesCount(0);\n        setTestesOffCount(0);\n        setTestesOkCount(0);\n        setTestesUrgent(false);\n        setHasPendentes(false);\n      }\n    })();\n    return () => {\n      mounted = false;\n    };\n  }, [API]);\n\n  // Backup: carregar status\n  const fetchBackupStatus = async () => {\n    if (!(isAdmin !== null && isAdmin !== void 0 && isAdmin())) return; // Somente admins\n    setLoadingBackup(true);\n    try {\n      const res = await fetch(`${API}/backup/status`, {\n        headers: token ? {\n          Authorization: `Bearer ${token}`\n        } : {}\n      });\n      if (res.ok) {\n        const data = await res.json();\n        setBackupStatus(data);\n        setBackupError(\"\");\n        // Verifica se já existe progresso em andamento\n        try {\n          const pr = await fetch(`${API}/backup/progress`, {\n            headers: token ? {\n              Authorization: `Bearer ${token}`\n            } : {}\n          });\n          if (pr.ok) {\n            const jd = await pr.json();\n            if (jd !== null && jd !== void 0 && jd.running) {\n              setProgress(jd);\n              // inicia polling assíncrono\n              pollProgress();\n            } else if ((jd === null || jd === void 0 ? void 0 : jd.percent) >= 100 || jd !== null && jd !== void 0 && jd.canceled) {\n              setProgress(jd);\n            }\n          }\n        } catch {}\n      } else if (res.status === 401 || res.status === 403) {\n        setBackupStatus(null);\n        setBackupError('Você precisa estar logado como Administrador para executar backups.');\n      }\n    } catch (e) {\n      // ignore\n    } finally {\n      setLoadingBackup(false);\n    }\n  };\n  const fetchBackupsList = async () => {\n    try {\n      const res = await fetch(`${API}/backup/list`, {\n        headers: token ? {\n          Authorization: `Bearer ${token}`\n        } : {}\n      });\n      if (res.ok) {\n        const data = await res.json();\n        setBackups(Array.isArray(data) ? data : []);\n      }\n    } catch (e) {\n      // ignore\n    }\n  };\n  useEffect(() => {\n    fetchBackupStatus();\n    // revalidar a cada 2 min\n    const t = setInterval(fetchBackupStatus, 120000);\n    return () => clearInterval(t);\n  }, [API, token]);\n  const runBackupNow = async () => {\n    if (runningBackup) return;\n    setRunningBackup(true);\n    try {\n      const res = await fetch(`${API}/backup/run`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          ...(token ? {\n            Authorization: `Bearer ${token}`\n          } : {})\n        }\n      });\n      if (res.ok) {\n        // iniciar polling de progresso\n        pollProgress();\n        setBackupError(\"\");\n      } else {\n        let msg = 'Falha ao iniciar backup';\n        try {\n          const j = await res.json();\n          if (j !== null && j !== void 0 && j.detail) msg = j.detail;\n        } catch {}\n        if (res.status === 401 || res.status === 403) msg = 'Não autorizado. Faça login como Administrador.';\n        setBackupError(msg);\n      }\n    } finally {\n      setRunningBackup(false);\n    }\n  };\n  const pollProgress = async () => {\n    setProgress({\n      running: true,\n      percent: 0,\n      processed: 0,\n      total: 0,\n      current: null\n    });\n    let done = false;\n    while (!done) {\n      try {\n        const res = await fetch(`${API}/backup/progress`, {\n          headers: token ? {\n            Authorization: `Bearer ${token}`\n          } : {}\n        });\n        if (res.ok) {\n          const data = await res.json();\n          setProgress(data);\n          if (!data.running && (data.percent >= 100 || data.canceled)) {\n            done = true;\n            await fetchBackupStatus();\n            if (backupsModalOpen) await fetchBackupsList();\n            break;\n          }\n        }\n      } catch (e) {}\n      await new Promise(r => setTimeout(r, 800));\n    }\n  };\n  const cancelBackup = async () => {\n    if (!progress.running || canceling) return;\n    setCanceling(true);\n    try {\n      await fetch(`${API}/backup/cancel`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          ...(token ? {\n            Authorization: `Bearer ${token}`\n          } : {})\n        }\n      });\n    } finally {\n      setCanceling(false);\n    }\n  };\n  const toggleFile = name => {\n    setSelectedFiles(prev => {\n      const next = new Set(prev);\n      if (next.has(name)) next.delete(name);else next.add(name);\n      return next;\n    });\n  };\n  const deleteSelected = async () => {\n    if (!selectedFiles.size) return;\n    const files = Array.from(selectedFiles);\n    try {\n      const res = await fetch(`${API}/backup`, {\n        method: 'DELETE',\n        headers: {\n          'Content-Type': 'application/json',\n          ...(token ? {\n            Authorization: `Bearer ${token}`\n          } : {})\n        },\n        body: JSON.stringify({\n          files\n        })\n      });\n      if (res.ok) {\n        setSelectedFiles(new Set());\n        await fetchBackupsList();\n        await fetchBackupStatus();\n      }\n    } catch (e) {\n      // ignore\n    }\n  };\n  const allDashboardCards = [{\n    title: 'Obras',\n    description: 'Gerenciar contratos e obras',\n    icon: Construction,\n    color: theme.palette.primary.main,\n    path: '/contratos',\n    permission: '/contratos'\n  }, {\n    title: 'Clientes',\n    description: 'Cadastro e gestão de clientes',\n    icon: People,\n    color: theme.palette.secondary.main,\n    path: '/clientes',\n    permission: '/clientes'\n  }, {\n    title: 'Financeiro',\n    description: 'Controle financeiro e despesas',\n    icon: AttachMoney,\n    color: theme.palette.success.main,\n    path: '/financeiro',\n    permission: '/financeiro'\n  }, {\n    title: 'Testes de Loja',\n    description: 'Agendamentos e registros de testes',\n    icon: Storefront,\n    color: theme.palette.primary.light,\n    path: '/testes-loja-menu',\n    permission: '/testes-loja-menu'\n  }, {\n    title: 'Administrador',\n    description: 'Administração do sistema',\n    icon: ExitToApp,\n    color: theme.palette.grey[600],\n    path: '/admin',\n    permission: '/admin',\n    adminOnly: true\n  }];\n  const filteredCards = allDashboardCards.filter(card => {\n    if (card.adminOnly && !isAdmin()) return false;\n    return hasPermission(card.permission);\n  });\n\n  // Forçar ordem desejada: Obras acima de Clientes\n  const desiredOrder = ['Obras', 'Clientes', 'Financeiro', 'Testes de Loja', 'Administrador'];\n  const sortedCards = [...filteredCards].sort((a, b) => {\n    const ia = desiredOrder.indexOf(a.title);\n    const ib = desiredOrder.indexOf(b.title);\n    return (ia === -1 ? 999 : ia) - (ib === -1 ? 999 : ib);\n  });\n  const handleCardClick = (path, title) => {\n    console.log('card clicked:', title, path);\n    if (title === 'Testes de Loja') {\n      setOpenTestesModal(true);\n      return;\n    }\n    try {\n      navigate(path);\n    } catch (e) {\n      console.error('navigate error:', e);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Box, {\n    sx: {\n      minHeight: '100vh',\n      p: 3\n    },\n    children: [/*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        maxWidth: 940,\n        mx: 'auto',\n        background: 'white',\n        borderRadius: 3,\n        p: 4\n      },\n      children: [/*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          display: 'flex',\n          justifyContent: 'space-between',\n          alignItems: 'center',\n          mb: 4\n        },\n        children: [/*#__PURE__*/_jsxDEV(Box, {\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"h4\",\n            sx: {\n              fontWeight: 700\n            },\n            children: \"Dashboard\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 324,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"subtitle1\",\n            color: \"text.secondary\",\n            children: [\"Bem-vindo, \", user === null || user === void 0 ? void 0 : user.nome, \"!\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 325,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 323,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"outlined\",\n          color: \"error\",\n          onClick: logout,\n          children: \"Sair\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 327,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 322,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        spacing: {\n          xs: 2,\n          sm: 3,\n          md: 3\n        },\n        alignItems: \"stretch\",\n        justifyContent: \"center\",\n        children: sortedCards.map((card, index) => {\n          var _progress$percent, _progress$percent$toF, _progress$percent2, _progress$percent2$to;\n          return /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 12,\n            sm: 12,\n            children: /*#__PURE__*/_jsxDEV(Card, {\n              role: \"button\",\n              tabIndex: 0,\n              onClick: () => handleCardClick(card.path, card.title),\n              onKeyDown: e => {\n                if (e.key === 'Enter' || e.key === ' ') {\n                  e.preventDefault();\n                  handleCardClick(card.path, card.title);\n                }\n              },\n              sx: {\n                cursor: 'pointer',\n                transition: 'all 0.3s ease',\n                borderRadius: 6,\n                boxShadow: '0 28px 80px rgba(0,0,0,0.14)',\n                '&:hover': {\n                  transform: 'translateY(-12px)',\n                  boxShadow: '0 40px 120px rgba(0,0,0,0.18)'\n                },\n                maxWidth: 940,\n                mx: 'auto',\n                minHeight: {\n                  xs: 210,\n                  sm: 240\n                }\n              },\n              children: /*#__PURE__*/_jsxDEV(CardContent, {\n                sx: {\n                  p: {\n                    xs: 4,\n                    sm: 5\n                  },\n                  textAlign: 'center',\n                  display: 'flex',\n                  flexDirection: 'column',\n                  alignItems: 'center'\n                },\n                children: [/*#__PURE__*/_jsxDEV(Avatar, {\n                  sx: {\n                    width: {\n                      xs: 86,\n                      sm: 108\n                    },\n                    height: {\n                      xs: 86,\n                      sm: 108\n                    },\n                    mx: 'auto',\n                    mb: 3,\n                    bgcolor: card.color\n                  },\n                  children: /*#__PURE__*/_jsxDEV(card.icon, {\n                    sx: {\n                      fontSize: {\n                        xs: 35,\n                        sm: 45\n                      },\n                      color: 'white'\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 351,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 350,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"h4\",\n                  sx: {\n                    fontWeight: 800,\n                    fontSize: {\n                      xs: '1.4rem',\n                      sm: '1.7rem'\n                    }\n                  },\n                  children: card.title\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 353,\n                  columnNumber: 19\n                }, this), card.title === 'Testes de Loja' && (hasPendentes ? /*#__PURE__*/_jsxDEV(Box, {\n                  sx: {\n                    mt: 2\n                  },\n                  children: /*#__PURE__*/_jsxDEV(Button, {\n                    variant: \"contained\",\n                    color: \"error\",\n                    onClick: e => {\n                      e.stopPropagation();\n                      setOpenPendentes(true);\n                      setOpenTestesModal(true);\n                    },\n                    children: \"Lojas pendentes\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 357,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 356,\n                  columnNumber: 23\n                }, this) : /*#__PURE__*/_jsxDEV(Box, {\n                  sx: {\n                    mt: 2\n                  },\n                  children: /*#__PURE__*/_jsxDEV(Button, {\n                    variant: \"contained\",\n                    color: \"success\",\n                    onClick: e => {\n                      e.stopPropagation();\n                      setOpenPendentes(false);\n                      setOpenTestesModal(true);\n                    },\n                    children: \"LOJAS OK\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 367,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 366,\n                  columnNumber: 23\n                }, this)), card.title === 'Administrador' && (isAdmin === null || isAdmin === void 0 ? void 0 : isAdmin()) && /*#__PURE__*/_jsxDEV(Box, {\n                  sx: {\n                    mt: 2,\n                    width: '100%'\n                  },\n                  onClick: e => e.stopPropagation(),\n                  children: [loadingBackup && /*#__PURE__*/_jsxDEV(CircularProgress, {\n                    size: 22\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 379,\n                    columnNumber: 41\n                  }, this), !loadingBackup && /*#__PURE__*/_jsxDEV(Stack, {\n                    spacing: 1,\n                    sx: {\n                      alignItems: 'center'\n                    },\n                    children: [backupError && /*#__PURE__*/_jsxDEV(Alert, {\n                      severity: \"error\",\n                      sx: {\n                        width: '100%'\n                      },\n                      children: backupError\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 383,\n                      columnNumber: 29\n                    }, this), backupStatus && backupStatus !== null && backupStatus !== void 0 && backupStatus.pending ? /*#__PURE__*/_jsxDEV(Alert, {\n                      severity: \"warning\",\n                      sx: {\n                        width: '100%'\n                      },\n                      action: /*#__PURE__*/_jsxDEV(Button, {\n                        color: \"inherit\",\n                        size: \"small\",\n                        onClick: e => {\n                          e.stopPropagation();\n                          runBackupNow();\n                        },\n                        disabled: progress.running,\n                        children: progress.running ? `${((_progress$percent = progress.percent) === null || _progress$percent === void 0 ? void 0 : (_progress$percent$toF = _progress$percent.toFixed) === null || _progress$percent$toF === void 0 ? void 0 : _progress$percent$toF.call(_progress$percent, 0)) || 0}%` : 'Fazer backup agora'\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 387,\n                        columnNumber: 31\n                      }, this),\n                      children: (backupStatus === null || backupStatus === void 0 ? void 0 : backupStatus.hours_since) != null ? `Backup pendente há ${backupStatus.hours_since}h` : 'Backup pendente'\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 386,\n                      columnNumber: 29\n                    }, this) : backupStatus ? /*#__PURE__*/_jsxDEV(Alert, {\n                      severity: \"success\",\n                      sx: {\n                        width: '100%'\n                      },\n                      action: /*#__PURE__*/_jsxDEV(Button, {\n                        color: \"inherit\",\n                        size: \"small\",\n                        onClick: e => {\n                          e.stopPropagation();\n                          runBackupNow();\n                        },\n                        disabled: progress.running,\n                        children: progress.running ? `${((_progress$percent2 = progress.percent) === null || _progress$percent2 === void 0 ? void 0 : (_progress$percent2$to = _progress$percent2.toFixed) === null || _progress$percent2$to === void 0 ? void 0 : _progress$percent2$to.call(_progress$percent2, 0)) || 0}%` : 'Criar agora'\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 395,\n                        columnNumber: 31\n                      }, this),\n                      children: backupStatus !== null && backupStatus !== void 0 && backupStatus.last_backup_at ? `Último backup: ${new Date(backupStatus.last_backup_at).toLocaleString('pt-BR')}` : 'Sem histórico de backup'\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 394,\n                      columnNumber: 29\n                    }, this) : /*#__PURE__*/_jsxDEV(Alert, {\n                      severity: \"info\",\n                      sx: {\n                        width: '100%'\n                      },\n                      action: /*#__PURE__*/_jsxDEV(Button, {\n                        color: \"inherit\",\n                        size: \"small\",\n                        onClick: () => navigate('/login'),\n                        children: \"Entrar\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 403,\n                        columnNumber: 31\n                      }, this),\n                      children: \"Backup indispon\\xEDvel. Fa\\xE7a login como Administrador.\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 402,\n                      columnNumber: 29\n                    }, this), (progress.running || progress.percent > 0) && /*#__PURE__*/_jsxDEV(Box, {\n                      sx: {\n                        width: '100%',\n                        display: 'flex',\n                        flexDirection: 'column',\n                        gap: 1\n                      },\n                      children: [/*#__PURE__*/_jsxDEV(Box, {\n                        sx: {\n                          display: 'flex',\n                          alignItems: 'center',\n                          justifyContent: 'space-between'\n                        },\n                        children: [/*#__PURE__*/_jsxDEV(Typography, {\n                          variant: \"caption\",\n                          color: \"text.secondary\",\n                          noWrap: true,\n                          maxWidth: 240,\n                          children: progress.current || (progress.running ? 'Preparando…' : progress.canceled ? 'Cancelado' : 'Concluído')\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 413,\n                          columnNumber: 33\n                        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                          variant: \"caption\",\n                          color: \"text.secondary\",\n                          children: [progress.processed, \"/\", progress.total]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 416,\n                          columnNumber: 33\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 412,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(LinearProgress, {\n                        variant: \"determinate\",\n                        value: Math.min(100, progress.percent || 0)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 418,\n                        columnNumber: 31\n                      }, this), progress.running && /*#__PURE__*/_jsxDEV(Box, {\n                        sx: {\n                          display: 'flex',\n                          justifyContent: 'flex-end'\n                        },\n                        children: /*#__PURE__*/_jsxDEV(Button, {\n                          size: \"small\",\n                          color: \"inherit\",\n                          onClick: cancelBackup,\n                          disabled: canceling,\n                          children: canceling ? 'Cancelando…' : 'Cancelar'\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 421,\n                          columnNumber: 35\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 420,\n                        columnNumber: 33\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 411,\n                      columnNumber: 29\n                    }, this), ((backupStatus === null || backupStatus === void 0 ? void 0 : backupStatus.over_limit) || ((backupStatus === null || backupStatus === void 0 ? void 0 : backupStatus.backups_count) || 0) > 7) && /*#__PURE__*/_jsxDEV(Alert, {\n                      severity: \"info\",\n                      sx: {\n                        width: '100%'\n                      },\n                      action: /*#__PURE__*/_jsxDEV(Button, {\n                        color: \"inherit\",\n                        size: \"small\",\n                        onClick: async () => {\n                          setBackupsModalOpen(true);\n                          await fetchBackupsList();\n                        },\n                        children: \"Gerenciar\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 430,\n                        columnNumber: 31\n                      }, this),\n                      children: [\"Voc\\xEA tem \", backupStatus === null || backupStatus === void 0 ? void 0 : backupStatus.backups_count, \" backups. Mantenha apenas 7.\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 429,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 381,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 378,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 349,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 333,\n              columnNumber: 15\n            }, this)\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 332,\n            columnNumber: 13\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 330,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          textAlign: 'center',\n          mt: 6,\n          pt: 3,\n          borderTop: '1px solid',\n          borderColor: theme.palette.grey[200]\n        },\n        children: /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"body2\",\n          color: \"text.secondary\",\n          children: [\"Sistema de Gest\\xE3o de Obras \\xA9 \", new Date().getFullYear()]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 448,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 447,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 321,\n      columnNumber: 3\n    }, this), /*#__PURE__*/_jsxDEV(TestesModal, {\n      open: openTestesModal,\n      onClose: () => {\n        setOpenTestesModal(false);\n        setOpenPendentes(false);\n      },\n      API: API,\n      navigate: navigate,\n      initialPendentes: openPendentes\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 452,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Dialog, {\n      open: backupsModalOpen,\n      onClose: () => setBackupsModalOpen(false),\n      maxWidth: \"sm\",\n      fullWidth: true,\n      children: [/*#__PURE__*/_jsxDEV(DialogTitle, {\n        children: \"Gerenciar backups (guardar at\\xE9 7 dias)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 461,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DialogContent, {\n        children: /*#__PURE__*/_jsxDEV(List, {\n          children: [backups.map(b => /*#__PURE__*/_jsxDEV(ListItem, {\n            dense: true,\n            disableGutters: true,\n            secondaryAction: /*#__PURE__*/_jsxDEV(Checkbox, {\n              edge: \"end\",\n              checked: selectedFiles.has(b.name),\n              onChange: () => toggleFile(b.name)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 466,\n              columnNumber: 17\n            }, this),\n            children: /*#__PURE__*/_jsxDEV(ListItemText, {\n              primary: b.name,\n              secondary: `${new Date(b.created).toLocaleString('pt-BR')} • ${(b.size / 1024 / 1024).toFixed(2)} MB`\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 468,\n              columnNumber: 17\n            }, this)\n          }, b.name, false, {\n            fileName: _jsxFileName,\n            lineNumber: 465,\n            columnNumber: 15\n          }, this)), !backups.length && /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"body2\",\n            color: \"text.secondary\",\n            children: \"Nenhum backup encontrado.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 472,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 463,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 462,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DialogActions, {\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          onClick: async () => {\n            await fetchBackupsList();\n          },\n          variant: \"text\",\n          children: \"Atualizar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 477,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          onClick: deleteSelected,\n          variant: \"contained\",\n          color: \"error\",\n          disabled: !selectedFiles.size,\n          children: \"Excluir selecionados\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 478,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          onClick: () => setBackupsModalOpen(false),\n          variant: \"outlined\",\n          children: \"Fechar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 479,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 476,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 460,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 320,\n    columnNumber: 5\n  }, this);\n}\n_s(DashboardHome, \"qsZzbzUzrz8P9b7MEOwy43VXVIY=\", false, function () {\n  return [useTheme, useNavigate, useAuth];\n});\n_c = DashboardHome;\nvar _c;\n$RefreshReg$(_c, \"DashboardHome\");","map":{"version":3,"names":["React","useEffect","useMemo","useState","Box","Grid","Card","CardContent","Typography","Avatar","Button","Chip","Alert","Stack","Dialog","DialogTitle","DialogContent","DialogActions","List","ListItem","ListItemText","Checkbox","CircularProgress","LinearProgress","useTheme","useNavigate","TestesModal","Construction","People","AttachMoney","ExitToApp","Storefront","useAuth","jsxDEV","_jsxDEV","DashboardHome","_s","theme","navigate","user","token","hasPermission","isAdmin","logout","API","process","env","REACT_APP_API_URL","testesCount","setTestesCount","testesUrgent","setTestesUrgent","testesList","setTestesList","testesArList","setTestesArList","clientes","setClientes","testesOffCount","setTestesOffCount","testesOkCount","setTestesOkCount","openTestesModal","setOpenTestesModal","hasPendentes","setHasPendentes","openPendentes","setOpenPendentes","backupStatus","setBackupStatus","loadingBackup","setLoadingBackup","backupsModalOpen","setBackupsModalOpen","backups","setBackups","selectedFiles","setSelectedFiles","Set","runningBackup","setRunningBackup","progress","setProgress","running","percent","processed","total","current","canceling","setCanceling","backupError","setBackupError","isAuthenticated","mounted","resGer","resAr","Promise","all","fetch","dataGer","dataAr","ok","json","resolve","listGer","Array","isArray","listAr","length","off","filter","t","status","toString","toUpperCase","Math","max","daysSince","dateStr","d","Date","isNaN","getTime","floor","now","sameDay","a","b","getFullYear","getMonth","getDate","getLatestBy","list","predicate","candidates","sort","data_teste","data","created_at","today","isThursday","getDay","pendentes","i","ger","Number","cliente_id","ar","gerDate","arDate","gerDays","arDays","gerOk","arOk","hasToday","some","overdue","pendenteHoje","e","fetchBackupStatus","res","headers","Authorization","pr","jd","pollProgress","canceled","fetchBackupsList","setInterval","clearInterval","runBackupNow","method","msg","j","detail","done","r","setTimeout","cancelBackup","toggleFile","name","prev","next","has","delete","add","deleteSelected","size","files","from","body","JSON","stringify","allDashboardCards","title","description","icon","color","palette","primary","main","path","permission","secondary","success","light","grey","adminOnly","filteredCards","card","desiredOrder","sortedCards","ia","indexOf","ib","handleCardClick","console","log","error","sx","minHeight","p","children","maxWidth","mx","background","borderRadius","display","justifyContent","alignItems","mb","variant","fontWeight","fileName","_jsxFileName","lineNumber","columnNumber","nome","onClick","container","spacing","xs","sm","md","map","index","_progress$percent","_progress$percent$toF","_progress$percent2","_progress$percent2$to","item","role","tabIndex","onKeyDown","key","preventDefault","cursor","transition","boxShadow","transform","textAlign","flexDirection","width","height","bgcolor","fontSize","mt","stopPropagation","severity","pending","action","disabled","toFixed","call","hours_since","last_backup_at","toLocaleString","gap","noWrap","value","min","over_limit","backups_count","pt","borderTop","borderColor","open","onClose","initialPendentes","fullWidth","dense","disableGutters","secondaryAction","edge","checked","onChange","created","_c","$RefreshReg$"],"sources":["D:/download/240825gestao/gestao/frontend/src/pages/DashboardHomeSimple.js"],"sourcesContent":["import React, { useEffect, useMemo, useState } from 'react';\r\nimport {\r\n  Box,\r\n  Grid,\r\n  Card,\r\n  CardContent,\r\n  Typography,\r\n  Avatar,\r\n  Button,\r\n  Chip,\r\n  Alert,\r\n  Stack,\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n  List,\r\n  ListItem,\r\n  ListItemText,\r\n  Checkbox,\r\n  CircularProgress,\r\n  LinearProgress\r\n} from '@mui/material';\r\nimport { useTheme } from '@mui/material/styles';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport TestesModal from '../components/TestesModal';\r\nimport {\r\n  Construction,\r\n  People,\r\n  AttachMoney,\r\n  ExitToApp\r\n} from '@mui/icons-material';\r\nimport { Storefront } from '@mui/icons-material';\r\nimport { useAuth } from '../contexts/AuthContext';\r\n\r\nexport default function DashboardHome() {\r\n  const theme = useTheme();\r\n  const navigate = useNavigate();\r\n  const { user, token, hasPermission, isAdmin, logout } = useAuth();\r\n  const API = process.env.REACT_APP_API_URL || 'http://localhost:8000';\r\n\r\n  const [testesCount, setTestesCount] = useState(null);\r\n  const [testesUrgent, setTestesUrgent] = useState(false);\r\n  const [testesList, setTestesList] = useState([]);\r\n  const [testesArList, setTestesArList] = useState([]);\r\n  const [clientes, setClientes] = useState([]);\r\n  const [testesOffCount, setTestesOffCount] = useState(0);\r\n  const [testesOkCount, setTestesOkCount] = useState(0);\r\n  const [openTestesModal, setOpenTestesModal] = useState(false);\r\n  const [hasPendentes, setHasPendentes] = useState(false);\r\n  const [openPendentes, setOpenPendentes] = useState(false);\r\n  // Backup\r\n  const [backupStatus, setBackupStatus] = useState(null);\r\n  const [loadingBackup, setLoadingBackup] = useState(false);\r\n  const [backupsModalOpen, setBackupsModalOpen] = useState(false);\r\n  const [backups, setBackups] = useState([]);\r\n  const [selectedFiles, setSelectedFiles] = useState(new Set());\r\n  const [runningBackup, setRunningBackup] = useState(false);\r\n  const [progress, setProgress] = useState({ running: false, percent: 0, processed: 0, total: 0, current: null });\r\n  const [canceling, setCanceling] = useState(false);\r\n  const [backupError, setBackupError] = useState(\"\");\r\n  const isAuthenticated = useMemo(() => !!token, [token]);\r\n\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    (async () => {\r\n      try {\r\n        const [resGer, resAr] = await Promise.all([\r\n          fetch(`${API}/testes-loja/`),\r\n          fetch(`${API}/testes-ar-condicionado/`)\r\n        ]);\r\n        const [dataGer, dataAr] = await Promise.all([\r\n          resGer.ok ? resGer.json() : Promise.resolve([]),\r\n          resAr.ok ? resAr.json() : Promise.resolve([])\r\n        ]);\r\n        if (!mounted) return;\r\n        const listGer = Array.isArray(dataGer) ? dataGer : [];\r\n        const listAr = Array.isArray(dataAr) ? dataAr : [];\r\n        const total = (listGer.length + listAr.length);\r\n        const off = (listGer.filter(t => (t.status || '').toString().toUpperCase() === 'OFF').length + listAr.filter(t => (t.status || '').toString().toUpperCase() === 'OFF').length);\r\n        const ok = Math.max(0, total - off);\r\n        setTestesCount(total);\r\n        setTestesOffCount(off);\r\n        setTestesOkCount(ok);\r\n        setTestesUrgent(off > 0);\r\n\r\n        // Cálculo de pendências: atraso > 7 dias ou quinta-feira sem registro do dia\r\n        const daysSince = (dateStr) => {\r\n          if (!dateStr) return null;\r\n          const d = new Date(dateStr);\r\n          if (isNaN(d.getTime())) return null;\r\n          return Math.floor((Date.now() - d.getTime()) / (1000 * 60 * 60 * 24));\r\n        };\r\n        const sameDay = (a, b) => a.getFullYear() === b.getFullYear() && a.getMonth() === b.getMonth() && a.getDate() === b.getDate();\r\n        const getLatestBy = (list, predicate) => {\r\n          if (!Array.isArray(list)) return null;\r\n          const candidates = list.filter(predicate);\r\n          if (!candidates.length) return null;\r\n          candidates.sort((a, b) => new Date(b.data_teste || b.data || b.created_at || 0) - new Date(a.data_teste || a.data || a.created_at || 0));\r\n          return candidates[0];\r\n        };\r\n\r\n        const today = new Date();\r\n        const isThursday = today.getDay() === 4; // 0-dom, 4-qui\r\n        let pendentes = 0;\r\n        for (let i = 1; i <= 16; i++) {\r\n          const ger = getLatestBy(listGer, t => Number(t.cliente_id) === i);\r\n          const ar = getLatestBy(listAr, t => Number(t.cliente_id) === i);\r\n          const gerDate = ger ? new Date(ger.data_teste || ger.data || ger.created_at) : null;\r\n          const arDate = ar ? new Date(ar.data_teste || ar.data || ar.created_at) : null;\r\n          const gerDays = gerDate ? daysSince(gerDate) : null;\r\n          const arDays = arDate ? daysSince(arDate) : null;\r\n          const gerOk = (gerDays !== null && gerDays <= 7);\r\n          const arOk = (arDays !== null && arDays <= 7);\r\n          const hasToday = [gerDate, arDate].some(d => d && sameDay(d, today));\r\n          // Pendente se qualquer um dos dois não estiver ok (ausente ou >7d), ou quinta-feira sem registro hoje\r\n          const overdue = !(gerOk && arOk);\r\n          const pendenteHoje = isThursday && !hasToday;\r\n          if (overdue || pendenteHoje) pendentes++;\r\n        }\r\n        setHasPendentes(pendentes > 0);\r\n      } catch (e) {\r\n        if (!mounted) return;\r\n        setTestesCount(0);\r\n        setTestesOffCount(0);\r\n        setTestesOkCount(0);\r\n        setTestesUrgent(false);\r\n        setHasPendentes(false);\r\n      }\r\n    })();\r\n    return () => { mounted = false; };\r\n  }, [API]);\r\n\r\n  // Backup: carregar status\r\n  const fetchBackupStatus = async () => {\r\n    if (!isAdmin?.()) return; // Somente admins\r\n    setLoadingBackup(true);\r\n    try {\r\n      const res = await fetch(`${API}/backup/status`, {\r\n        headers: token ? { Authorization: `Bearer ${token}` } : {}\r\n      });\r\n      if (res.ok) {\r\n        const data = await res.json();\r\n        setBackupStatus(data);\r\n        setBackupError(\"\");\r\n        // Verifica se já existe progresso em andamento\r\n        try {\r\n          const pr = await fetch(`${API}/backup/progress`, { headers: token ? { Authorization: `Bearer ${token}` } : {} });\r\n          if (pr.ok) {\r\n            const jd = await pr.json();\r\n            if (jd?.running) {\r\n              setProgress(jd);\r\n              // inicia polling assíncrono\r\n              pollProgress();\r\n            } else if (jd?.percent >= 100 || jd?.canceled) {\r\n              setProgress(jd);\r\n            }\r\n          }\r\n        } catch {}\r\n      } else if (res.status === 401 || res.status === 403) {\r\n        setBackupStatus(null);\r\n        setBackupError('Você precisa estar logado como Administrador para executar backups.');\r\n      }\r\n    } catch (e) {\r\n      // ignore\r\n    } finally {\r\n      setLoadingBackup(false);\r\n    }\r\n  };\r\n\r\n  const fetchBackupsList = async () => {\r\n    try {\r\n      const res = await fetch(`${API}/backup/list`, {\r\n        headers: token ? { Authorization: `Bearer ${token}` } : {}\r\n      });\r\n      if (res.ok) {\r\n        const data = await res.json();\r\n        setBackups(Array.isArray(data) ? data : []);\r\n      }\r\n    } catch (e) {\r\n      // ignore\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchBackupStatus();\r\n    // revalidar a cada 2 min\r\n  const t = setInterval(fetchBackupStatus, 120000);\r\n  return () => clearInterval(t);\r\n  }, [API, token]);\r\n\r\n  const runBackupNow = async () => {\r\n    if (runningBackup) return;\r\n    setRunningBackup(true);\r\n    try {\r\n      const res = await fetch(`${API}/backup/run`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          ...(token ? { Authorization: `Bearer ${token}` } : {})\r\n        }\r\n      });\r\n      if (res.ok) {\r\n        // iniciar polling de progresso\r\n        pollProgress();\r\n        setBackupError(\"\");\r\n      } else {\r\n        let msg = 'Falha ao iniciar backup';\r\n        try { const j = await res.json(); if (j?.detail) msg = j.detail; } catch {}\r\n        if (res.status === 401 || res.status === 403) msg = 'Não autorizado. Faça login como Administrador.';\r\n        setBackupError(msg);\r\n      }\r\n    } finally {\r\n      setRunningBackup(false);\r\n    }\r\n  };\r\n\r\n  const pollProgress = async () => {\r\n    setProgress({ running: true, percent: 0, processed: 0, total: 0, current: null });\r\n    let done = false;\r\n    while (!done) {\r\n      try {\r\n        const res = await fetch(`${API}/backup/progress`, { headers: token ? { Authorization: `Bearer ${token}` } : {} });\r\n        if (res.ok) {\r\n          const data = await res.json();\r\n          setProgress(data);\r\n          if (!data.running && (data.percent >= 100 || data.canceled)) {\r\n            done = true;\r\n            await fetchBackupStatus();\r\n            if (backupsModalOpen) await fetchBackupsList();\r\n            break;\r\n          }\r\n        }\r\n      } catch (e) {}\r\n      await new Promise(r => setTimeout(r, 800));\r\n    }\r\n  };\r\n\r\n  const cancelBackup = async () => {\r\n    if (!progress.running || canceling) return;\r\n    setCanceling(true);\r\n    try {\r\n      await fetch(`${API}/backup/cancel`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          ...(token ? { Authorization: `Bearer ${token}` } : {})\r\n        }\r\n      });\r\n    } finally {\r\n      setCanceling(false);\r\n    }\r\n  };\r\n\r\n  const toggleFile = (name) => {\r\n    setSelectedFiles(prev => {\r\n      const next = new Set(prev);\r\n      if (next.has(name)) next.delete(name); else next.add(name);\r\n      return next;\r\n    });\r\n  };\r\n\r\n  const deleteSelected = async () => {\r\n    if (!selectedFiles.size) return;\r\n    const files = Array.from(selectedFiles);\r\n    try {\r\n      const res = await fetch(`${API}/backup`, {\r\n        method: 'DELETE',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          ...(token ? { Authorization: `Bearer ${token}` } : {})\r\n        },\r\n        body: JSON.stringify({ files })\r\n      });\r\n      if (res.ok) {\r\n        setSelectedFiles(new Set());\r\n        await fetchBackupsList();\r\n        await fetchBackupStatus();\r\n      }\r\n    } catch (e) {\r\n      // ignore\r\n    }\r\n  };\r\n\r\n  const allDashboardCards = [\r\n    { title: 'Obras', description: 'Gerenciar contratos e obras', icon: Construction, color: theme.palette.primary.main, path: '/contratos', permission: '/contratos' },\r\n    { title: 'Clientes', description: 'Cadastro e gestão de clientes', icon: People, color: theme.palette.secondary.main, path: '/clientes', permission: '/clientes' },\r\n    { title: 'Financeiro', description: 'Controle financeiro e despesas', icon: AttachMoney, color: theme.palette.success.main, path: '/financeiro', permission: '/financeiro' },\r\n    { title: 'Testes de Loja', description: 'Agendamentos e registros de testes', icon: Storefront, color: theme.palette.primary.light, path: '/testes-loja-menu', permission: '/testes-loja-menu' },\r\n  { title: 'Administrador', description: 'Administração do sistema', icon: ExitToApp, color: theme.palette.grey[600], path: '/admin', permission: '/admin', adminOnly: true }\r\n  ];\r\n\r\n  const filteredCards = allDashboardCards.filter(card => {\r\n    if (card.adminOnly && !isAdmin()) return false;\r\n    return hasPermission(card.permission);\r\n  });\r\n\r\n  // Forçar ordem desejada: Obras acima de Clientes\r\n  const desiredOrder = ['Obras', 'Clientes', 'Financeiro', 'Testes de Loja', 'Administrador'];\r\n  const sortedCards = [...filteredCards].sort((a, b) => {\r\n    const ia = desiredOrder.indexOf(a.title);\r\n    const ib = desiredOrder.indexOf(b.title);\r\n    return (ia === -1 ? 999 : ia) - (ib === -1 ? 999 : ib);\r\n  });\r\n\r\n  const handleCardClick = (path, title) => {\r\n    console.log('card clicked:', title, path);\r\n    if (title === 'Testes de Loja') {\r\n      setOpenTestesModal(true);\r\n      return;\r\n    }\r\n    try {\r\n      navigate(path);\r\n    } catch (e) {\r\n      console.error('navigate error:', e);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Box sx={{ minHeight: '100vh', p: 3 }}>\r\n  <Box sx={{ maxWidth: 940, mx: 'auto', background: 'white', borderRadius: 3, p: 4 }}>\r\n        <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 4 }}>\r\n          <Box>\r\n            <Typography variant=\"h4\" sx={{ fontWeight: 700 }}>Dashboard</Typography>\r\n            <Typography variant=\"subtitle1\" color=\"text.secondary\">Bem-vindo, {user?.nome}!</Typography>\r\n          </Box>\r\n          <Button variant=\"outlined\" color=\"error\" onClick={logout}>Sair</Button>\r\n        </Box>\r\n\r\n        <Grid container spacing={{ xs: 2, sm: 3, md: 3 }} alignItems=\"stretch\" justifyContent=\"center\">\r\n          {sortedCards.map((card, index) => (\r\n            <Grid item xs={12} sm={12} key={index}>\r\n              <Card\r\n                role=\"button\"\r\n                tabIndex={0}\r\n                onClick={() => handleCardClick(card.path, card.title)}\r\n                onKeyDown={(e) => { if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); handleCardClick(card.path, card.title); } }}\r\n                sx={{\r\n                  cursor: 'pointer',\r\n                  transition: 'all 0.3s ease',\r\n                  borderRadius: 6,\r\n                  boxShadow: '0 28px 80px rgba(0,0,0,0.14)',\r\n                  '&:hover': { transform: 'translateY(-12px)', boxShadow: '0 40px 120px rgba(0,0,0,0.18)' },\r\n                  maxWidth: 940,\r\n                  mx: 'auto',\r\n                  minHeight: { xs: 210, sm: 240 }\r\n                }}\r\n              >\r\n                <CardContent sx={{ p: { xs: 4, sm: 5 }, textAlign: 'center', display: 'flex', flexDirection: 'column', alignItems: 'center' }}>\r\n                  <Avatar sx={{ width: { xs: 86, sm: 108 }, height: { xs: 86, sm: 108 }, mx: 'auto', mb: 3, bgcolor: card.color }}>\r\n                    <card.icon sx={{ fontSize: { xs: 35, sm: 45 }, color: 'white' }} />\r\n                  </Avatar>\r\n                  <Typography variant=\"h4\" sx={{ fontWeight: 800, fontSize: { xs: '1.4rem', sm: '1.7rem' } }}>{card.title}</Typography>\r\n                  {card.title === 'Testes de Loja' && (\r\n                    hasPendentes ? (\r\n                      <Box sx={{ mt: 2 }}>\r\n                        <Button\r\n                          variant=\"contained\"\r\n                          color=\"error\"\r\n                          onClick={(e) => { e.stopPropagation(); setOpenPendentes(true); setOpenTestesModal(true); }}\r\n                        >\r\n                          Lojas pendentes\r\n                        </Button>\r\n                      </Box>\r\n                    ) : (\r\n                      <Box sx={{ mt: 2 }}>\r\n                        <Button\r\n                          variant=\"contained\"\r\n                          color=\"success\"\r\n                          onClick={(e) => { e.stopPropagation(); setOpenPendentes(false); setOpenTestesModal(true); }}\r\n                        >\r\n                          LOJAS OK\r\n                        </Button>\r\n                      </Box>\r\n                    )\r\n                  )}\r\n                  {card.title === 'Administrador' && isAdmin?.() && (\r\n                    <Box sx={{ mt: 2, width: '100%' }} onClick={(e) => e.stopPropagation()}>\r\n                      {loadingBackup && <CircularProgress size={22} />}\r\n                      {!loadingBackup && (\r\n                        <Stack spacing={1} sx={{ alignItems: 'center' }}>\r\n                          {backupError && (\r\n                            <Alert severity=\"error\" sx={{ width: '100%' }}>{backupError}</Alert>\r\n                          )}\r\n                          {backupStatus && backupStatus?.pending ? (\r\n                            <Alert severity=\"warning\" sx={{ width: '100%' }} action={\r\n                              <Button color=\"inherit\" size=\"small\" onClick={(e) => { e.stopPropagation(); runBackupNow(); }} disabled={progress.running}>\r\n                                {progress.running ? `${progress.percent?.toFixed?.(0) || 0}%` : 'Fazer backup agora'}\r\n                              </Button>\r\n                            }>\r\n                              {backupStatus?.hours_since != null ? `Backup pendente há ${backupStatus.hours_since}h` : 'Backup pendente'}\r\n                            </Alert>\r\n                          ) : backupStatus ? (\r\n                            <Alert severity=\"success\" sx={{ width: '100%' }} action={\r\n                              <Button color=\"inherit\" size=\"small\" onClick={(e) => { e.stopPropagation(); runBackupNow(); }} disabled={progress.running}>\r\n                                {progress.running ? `${progress.percent?.toFixed?.(0) || 0}%` : 'Criar agora'}\r\n                              </Button>\r\n                            }>\r\n                              {backupStatus?.last_backup_at ? `Último backup: ${new Date(backupStatus.last_backup_at).toLocaleString('pt-BR')}` : 'Sem histórico de backup'}\r\n                            </Alert>\r\n                          ) : (\r\n                            <Alert severity=\"info\" sx={{ width: '100%' }} action={\r\n                              <Button color=\"inherit\" size=\"small\" onClick={() => navigate('/login')}>\r\n                                Entrar\r\n                              </Button>\r\n                            }>\r\n                              Backup indisponível. Faça login como Administrador.\r\n                            </Alert>\r\n                          )}\r\n                          {(progress.running || progress.percent > 0) && (\r\n                            <Box sx={{ width: '100%', display: 'flex', flexDirection: 'column', gap: 1 }}>\r\n                              <Box sx={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between' }}>\r\n                                <Typography variant=\"caption\" color=\"text.secondary\" noWrap maxWidth={240}>\r\n                                  {progress.current || (progress.running ? 'Preparando…' : (progress.canceled ? 'Cancelado' : 'Concluído'))}\r\n                                </Typography>\r\n                                <Typography variant=\"caption\" color=\"text.secondary\">{progress.processed}/{progress.total}</Typography>\r\n                              </Box>\r\n                              <LinearProgress variant=\"determinate\" value={Math.min(100, progress.percent || 0)} />\r\n                              {progress.running && (\r\n                                <Box sx={{ display: 'flex', justifyContent: 'flex-end' }}>\r\n                                  <Button size=\"small\" color=\"inherit\" onClick={cancelBackup} disabled={canceling}>\r\n                                    {canceling ? 'Cancelando…' : 'Cancelar'}\r\n                                  </Button>\r\n                                </Box>\r\n                              )}\r\n                            </Box>\r\n                          )}\r\n                          {(backupStatus?.over_limit || (backupStatus?.backups_count || 0) > 7) && (\r\n                            <Alert severity=\"info\" sx={{ width: '100%' }} action={\r\n                              <Button color=\"inherit\" size=\"small\" onClick={async () => { setBackupsModalOpen(true); await fetchBackupsList(); }}>\r\n                                Gerenciar\r\n                              </Button>\r\n                            }>\r\n                              Você tem {backupStatus?.backups_count} backups. Mantenha apenas 7.\r\n                            </Alert>\r\n                          )}\r\n                        </Stack>\r\n                      )}\r\n                    </Box>\r\n                  )}\r\n                </CardContent>\r\n              </Card>\r\n            </Grid>\r\n          ))}\r\n        </Grid>\r\n\r\n        <Box sx={{ textAlign: 'center', mt: 6, pt: 3, borderTop: '1px solid', borderColor: theme.palette.grey[200] }}>\r\n          <Typography variant=\"body2\" color=\"text.secondary\">Sistema de Gestão de Obras © {new Date().getFullYear()}</Typography>\r\n        </Box>\r\n      </Box>\r\n\r\n      <TestesModal\r\n        open={openTestesModal}\r\n        onClose={() => { setOpenTestesModal(false); setOpenPendentes(false); }}\r\n        API={API}\r\n        navigate={navigate}\r\n        initialPendentes={openPendentes}\r\n      />\r\n\r\n      <Dialog open={backupsModalOpen} onClose={() => setBackupsModalOpen(false)} maxWidth=\"sm\" fullWidth>\r\n        <DialogTitle>Gerenciar backups (guardar até 7 dias)</DialogTitle>\r\n        <DialogContent>\r\n          <List>\r\n            {backups.map((b) => (\r\n              <ListItem key={b.name} dense disableGutters secondaryAction={\r\n                <Checkbox edge=\"end\" checked={selectedFiles.has(b.name)} onChange={() => toggleFile(b.name)} />\r\n              }>\r\n                <ListItemText primary={b.name} secondary={`${new Date(b.created).toLocaleString('pt-BR')} • ${(b.size/1024/1024).toFixed(2)} MB`} />\r\n              </ListItem>\r\n            ))}\r\n            {!backups.length && (\r\n              <Typography variant=\"body2\" color=\"text.secondary\">Nenhum backup encontrado.</Typography>\r\n            )}\r\n          </List>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={async () => { await fetchBackupsList(); }} variant=\"text\">Atualizar</Button>\r\n          <Button onClick={deleteSelected} variant=\"contained\" color=\"error\" disabled={!selectedFiles.size}>Excluir selecionados</Button>\r\n          <Button onClick={() => setBackupsModalOpen(false)} variant=\"outlined\">Fechar</Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Box>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}